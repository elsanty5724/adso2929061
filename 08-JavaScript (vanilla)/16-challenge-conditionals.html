<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>16-challenge-conditionals</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #fff;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            width: 90%;
            max-width: 500px;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .weather {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .search {
            display: flex;
            width: 100%;
            margin-bottom: 1rem;
        }

        .query {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
            outline: none;
            font-size: 1rem;
        }

        .btn-search {
            background-color: transparent;
            color: white;
            border: none;
            padding: 0 1.2rem;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }

        .btn-search:hover {
            background-color: #45a049;
        }

        .widget {
            width: 100%;
            text-align: center;
        }

        .weather-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .weather-info div {
            background-color: #f9f9f9;
            padding: 0.8rem;
            border-radius: 5px;
        }

        .weather-info div span:first-child {
            font-weight: bold;
            color: #555;
        }

        .main-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .temp {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .location {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .condition {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .error {
            color: red;
            text-align: center;
            margin-top: 1rem;
        }
    </style>
</head>

<body class="JS">
    <nav>
        <a href="index.html">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                <path fill="#ffffff"
                    d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z">
                </path>
            </svg>
        </a>
    </nav>
    <div class="container">
        <h1>Weather App</h1>
        <div class="weather">
            <div class="search">
                <input type="text" class="query" placeholder="Search for a city...">
                <button class="btn-search">Search</button>
            </div>
            <figure class="widget">
                <div class="main-info">
                    <div>
                        <div class="location"></div>
                        <div class="datetime"></div>
                    </div>
                    <div class="temp"></div>
                    <div class="condition">
                        <img class="condition-icon" src="" alt="">
                        <span class="condition-text"></span>
                    </div>
                </div>
                <div class="weather-info">
                    <div><span>Humidity:</span> <span class="humidity"></span></div>
                    <div><span>Cloud:</span> <span class="cloud"></span></div>
                    <div><span>Is Day:</span> <span class="is-day"></span></div>
                    <div><span>Country:</span> <span class="country"></span></div>
                </div>
                <div class="error"></div>
            </figure>
        </div>
    </div>

    <script>
        // Elements
        const queryInput = document.querySelector('.query');
        const btnSearch = document.querySelector('.btn-search');
        const locationEl = document.querySelector('.location');
        const datetimeEl = document.querySelector('.datetime');
        const tempEl = document.querySelector('.temp');
        const conditionIconEl = document.querySelector('.condition-icon');
        const conditionTextEl = document.querySelector('.condition-text');
        const humidityEl = document.querySelector('.humidity');
        const cloudEl = document.querySelector('.cloud');
        const isDayEl = document.querySelector('.is-day');
        const countryEl = document.querySelector('.country');
        const errorEl = document.querySelector('.error');

        // Events
        btnSearch.addEventListener('click', () => {
            const location = queryInput.value.trim();
            if (location.length !== 0) {
                showWeather(location);
            } else {
                showError('Please enter a location');
            }
        });

        queryInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                btnSearch.click();
            }
        });

        const showWeather = async (location) => {
            try {
                errorEl.textContent = '';
                const url = `https://api.weatherapi.com/v1/current.json?key=9a61cceb9d46444fa9d11106251005&q=${location}`;
                const response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error('Location not found');
                }
                
                const data = await response.json();

                // Update UI with weather data
                locationEl.textContent = `${data.location.name}`;
                countryEl.textContent = data.location.country;
                
                // Format date and time
                const datetime = new Date(data.location.localtime);
                datetimeEl.textContent = datetime.toLocaleString();
                
                tempEl.textContent = `${data.current.temp_c}Â°C`;
                conditionIconEl.src = data.current.condition.icon;
                conditionTextEl.textContent = data.current.condition.text;
                humidityEl.textContent = `${data.current.humidity}%`;
                cloudEl.textContent = `${data.current.cloud}%`;
                isDayEl.textContent = data.current.is_day ? 'Yes' : 'No';
                
            } catch (error) {
                showError(error.message);
                console.error('Error fetching weather data:', error);
            }
        };

        const showError = (message) => {
            errorEl.textContent = message;
            // Clear weather data
            locationEl.textContent = '';
            datetimeEl.textContent = '';
            tempEl.textContent = '';
            conditionIconEl.src = '';
            conditionTextEl.textContent = '';
            humidityEl.textContent = '';
            cloudEl.textContent = '';
            isDayEl.textContent = '';
            countryEl.textContent = '';
        };

        // Load default location on start
        showWeather('Manizales');
    </script>
</body>
</html>